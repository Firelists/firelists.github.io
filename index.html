<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Firelists</title>
  <link href="http://fonts.googleapis.com/css?family=Oswald:400,700" rel="stylesheet">
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <script type="text/x-handlebars">
    <div id="page">
      <header>
        <h1 {{action 'toHome'}}><span class="fire">Fire</span>lists</h1>
        <nav class="auth-cloak">
          {{#if auth.authorized}}
            <div class="dropdown">
              <strong>{{auth.currentUser.username}}</strong>
              <a {{action 'logout'}}>Logout</a>
            </div>
          {{else}}
            <a {{action 'login'}}>Login</a>
          {{/if}}
        </nav>
      </header>

      <main class="auth-cloak">
        {{outlet}}
      </main>

      <footer>
        {{#link-to 'about'}}About{{/link-to}}
        <a href="https://github.com/Firelists/firelists.github.io"><i class="fa fa-github"></i></a>
      </footer>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    <section id="new-list" class="cf">
      {{input placeholder="Name of your new list" value=newListName action='newList'}}
      <button {{action 'newList'}}>Create</button>
    </section>
    {{render 'myLists' auth.lists}}
  </script>

  <script type="text/x-handlebars" data-template-name="myLists">
    {{#if auth.authorized}} 
      <section id="my-lists" class="cf">
        <h3>Saved lists</h3>
        <ul>
          {{#each}}
            <li>
              <a {{action 'gotoList' this}}>{{name}}</a>
              <i class="fa fa-times pull-right show-on-hover action" {{action 'removeSavedList' this}}></i>
            </li>
          {{else}}
            <li class="no-items">No saved lists.</li>
          {{/each}}
        </ul>
      </section>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="list">
    <section id="list" class="load-cloak cf">
      <h2>{{name}}</h2>
      <section id="list-actions">
        {{#if auth.authorized}}
          {{#if userHasList}}
            <i class="fa fa-times pull-right action" {{action 'removeList'}}></i>
          {{else}}
            <i class="fa fa-save pull-right action" {{action 'saveList'}}></i>
          {{/if}}
        {{/if}}
        <section id="list-url"><a {{bind-attr href=url}}>{{url}}</a></section>
      </section>
      {{render 'newListItem' this}}
      {{render 'listItems' items}}
    </section>
  </script>

  <script type="text/x-handlebars" data-template-name="listItems">
    <section id="list-stats" class="cf">
      Total: <span class="coal">{{length}}</span>
      Remaining: <span class="coal">{{remaining}}</span>
    </section>
    <section id="list-items" class="cf">
      <ul>
        {{#each}}
          <li {{bind-attr class="done isEditing:editing"}}>
            <i class="fa fa-check action" {{action toggleDone}}></i>
            {{#if isEditing}}
             {{focus-input value=newTitle placeholder="Title" enter='updateTitle' escape-press='cancelEdit'}}
             <i class="fa fa-pencil action" {{action 'updateTitle'}}></i>
             <i class="fa fa-times-circle action" {{action 'cancelEdit'}}></i>
            {{else}}
              <span {{action 'edit'}}>{{title}}</span>
            {{/if}}
            <i class="fa fa-times pull-right show-on-hover action" {{action removeItem this}}></i>
          </li>
        {{/each}}
      </ul>
    </section>
  </script>

  <script type="text/x-handlebars" data-template-name="newListItem">
    <section id="new-list-item" class="cf">
      {{input placeholder="Title of list item" value=newListItemTitle action='newItem'}}
      <button {{action 'newItem'}}>Add</button>
    </section>
  </script>

  <script type="text/x-handlebars" data-template-name="about">
    <h2>About Firelists</h2>
    <h3>What is it?</h3>
    <h3>How does it work?</h3>
    <h3>Who made it?</h3>
  </script>

  <script src="https://cdn.firebase.com/v0/firebase.js"></script>
  <script src="js/libs/jquery-1.10.2.js"></script>
  <script src="js/libs/handlebars-1.1.2.js"></script>
  <script src="js/libs/ember-1.4.0.js"></script>
  <script src="js/libs/emberfire-latest.min.js"></script>
  <script src="https://cdn.firebase.com/js/simple-login/1.3.0/firebase-simple-login.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
